--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5 (Ubuntu 17.5-1.pgdg24.04+1)
-- Dumped by pg_dump version 17.5 (Ubuntu 17.5-1.pgdg24.04+1)

-- Started on 2025-11-17 07:17:59 MSK

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 857 (class 1247 OID 25626)
-- Name: vehicle_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.vehicle_type AS ENUM (
    'CAR',
    'TRUCK',
    'BUS',
    'MINIVAN',
    'SUV'
);


ALTER TYPE public.vehicle_type OWNER TO postgres;

--
-- TOC entry 860 (class 1247 OID 25638)
-- Name: vehicletype; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.vehicletype AS ENUM (
    'BUS',
    'CAR',
    'MINIVAN',
    'SUV',
    'TRUCK'
);


ALTER TYPE public.vehicletype OWNER TO postgres;

--
-- TOC entry 3249 (class 2605 OID 25649)
-- Name: CAST (character varying AS public.vehicletype); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (character varying AS public.vehicletype) WITH INOUT AS IMPLICIT;


--
-- TOC entry 3329 (class 2605 OID 25650)
-- Name: CAST (public.vehicletype AS character varying); Type: CAST; Schema: -; Owner: -
--

CREATE CAST (public.vehicletype AS character varying) WITH INOUT AS IMPLICIT;


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 217 (class 1259 OID 25651)
-- Name: driver_vehicle; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.driver_vehicle (
    driver_id bigint NOT NULL,
    vehicle_id bigint NOT NULL
);


ALTER TABLE public.driver_vehicle OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 25654)
-- Name: drivers; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.drivers (
    id bigint NOT NULL,
    monthly_salary integer,
    name character varying(255) NOT NULL,
    patronymic character varying(255),
    surname character varying(255) NOT NULL,
    current_vehicle_id bigint,
    enterprise_id bigint
);


ALTER TABLE public.drivers OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 25659)
-- Name: drivers_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.drivers ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.drivers_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 25660)
-- Name: enterprise_manager; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.enterprise_manager (
    enterprise_id bigint NOT NULL,
    manager_id bigint NOT NULL
);


ALTER TABLE public.enterprise_manager OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 25663)
-- Name: enterprises; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.enterprises (
    id bigint NOT NULL,
    city character varying(255) NOT NULL,
    name character varying(255) NOT NULL
);


ALTER TABLE public.enterprises OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 25668)
-- Name: enterprises_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.enterprises ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.enterprises_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 223 (class 1259 OID 25669)
-- Name: managers; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.managers (
    id bigint NOT NULL,
    username character varying(100) NOT NULL,
    password_digest character varying(255) NOT NULL,
    name character varying(100) NOT NULL,
    surname character varying(100) NOT NULL,
    patronymic character varying(100)
);


ALTER TABLE public.managers OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 25674)
-- Name: managers_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.managers_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.managers_id_seq OWNER TO postgres;

--
-- TOC entry 3521 (class 0 OID 0)
-- Dependencies: 224
-- Name: managers_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.managers_id_seq OWNED BY public.managers.id;


--
-- TOC entry 225 (class 1259 OID 25675)
-- Name: vehicle_models; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.vehicle_models (
    id bigint NOT NULL,
    fuel_tank_volume integer NOT NULL,
    load_capacity_kg integer NOT NULL,
    name character varying(255) NOT NULL,
    seats_count integer NOT NULL,
    trunk_volume_l integer NOT NULL,
    vehicle_type public.vehicletype NOT NULL
);


ALTER TABLE public.vehicle_models OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 25678)
-- Name: vehicle_models_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.vehicle_models ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.vehicle_models_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 227 (class 1259 OID 25679)
-- Name: vehicles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.vehicles (
    id bigint NOT NULL,
    description character varying(255),
    manufacture_year integer NOT NULL,
    mileage_km integer NOT NULL,
    number_ru character varying(255),
    price_rub integer NOT NULL,
    region_registration_code integer,
    enterprise_id bigint,
    model_id bigint,
    CONSTRAINT vehicles_manufacture_year_check CHECK ((manufacture_year >= 1700)),
    CONSTRAINT vehicles_region_registration_code_check CHECK (((region_registration_code >= 1) AND (region_registration_code <= 999)))
);


ALTER TABLE public.vehicles OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 25686)
-- Name: vehicles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.vehicles ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.vehicles_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3330 (class 2604 OID 25687)
-- Name: managers id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.managers ALTER COLUMN id SET DEFAULT nextval('public.managers_id_seq'::regclass);


--
-- TOC entry 3504 (class 0 OID 25651)
-- Dependencies: 217
-- Data for Name: driver_vehicle; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.driver_vehicle VALUES (1, 1);
INSERT INTO public.driver_vehicle VALUES (1, 2);
INSERT INTO public.driver_vehicle VALUES (2, 3);
INSERT INTO public.driver_vehicle VALUES (2, 4);
INSERT INTO public.driver_vehicle VALUES (3, 5);
INSERT INTO public.driver_vehicle VALUES (4, 1);
INSERT INTO public.driver_vehicle VALUES (4, 3);
INSERT INTO public.driver_vehicle VALUES (5, 6);
INSERT INTO public.driver_vehicle VALUES (5, 7);
INSERT INTO public.driver_vehicle VALUES (6, 8);
INSERT INTO public.driver_vehicle VALUES (6, 9);
INSERT INTO public.driver_vehicle VALUES (7, 10);
INSERT INTO public.driver_vehicle VALUES (8, 11);
INSERT INTO public.driver_vehicle VALUES (8, 12);
INSERT INTO public.driver_vehicle VALUES (9, 13);
INSERT INTO public.driver_vehicle VALUES (9, 14);
INSERT INTO public.driver_vehicle VALUES (10, 15);
INSERT INTO public.driver_vehicle VALUES (11, 16);
INSERT INTO public.driver_vehicle VALUES (11, 17);
INSERT INTO public.driver_vehicle VALUES (12, 18);
INSERT INTO public.driver_vehicle VALUES (12, 19);
INSERT INTO public.driver_vehicle VALUES (13, 20);
INSERT INTO public.driver_vehicle VALUES (13, 21);
INSERT INTO public.driver_vehicle VALUES (14, 22);
INSERT INTO public.driver_vehicle VALUES (14, 23);


--
-- TOC entry 3505 (class 0 OID 25654)
-- Dependencies: 218
-- Data for Name: drivers; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.drivers VALUES (1, 85000, 'Иван', 'Сергеевич', 'Петров', 1, 1);
INSERT INTO public.drivers VALUES (2, 92000, 'Алексей', 'Владимирович', 'Смирнов', 3, 1);
INSERT INTO public.drivers VALUES (4, 88000, 'Сергей', 'Игоревич', 'Новиков', 2, 1);
INSERT INTO public.drivers VALUES (5, 81000, 'Андрей', 'Петрович', 'Волков', 6, 2);
INSERT INTO public.drivers VALUES (6, 76000, 'Михаил', 'Дмитриевич', 'Соловьев', 7, 2);
INSERT INTO public.drivers VALUES (8, 79000, 'Павел', 'Александрович', 'Зайцев', 11, 3);
INSERT INTO public.drivers VALUES (9, 82000, 'Николай', 'Викторович', 'Павлов', 12, 3);
INSERT INTO public.drivers VALUES (11, 95000, 'Владимир', 'Николаевич', 'Голубев', 16, 4);
INSERT INTO public.drivers VALUES (12, 87000, 'Роман', 'Анатольевич', 'Виноградов', 17, 4);
INSERT INTO public.drivers VALUES (13, 91000, 'Антон', 'Иванович', 'Белов', 20, 4);
INSERT INTO public.drivers VALUES (3, 78000, 'Дмитрий', 'Андреевич', 'Козлов', NULL, 1);
INSERT INTO public.drivers VALUES (7, 73000, 'Артем', 'Сергеевич', 'Васильев', NULL, 2);
INSERT INTO public.drivers VALUES (10, 68000, 'Егор', 'Олегович', 'Семенов', NULL, 3);
INSERT INTO public.drivers VALUES (14, 75000, 'Григорий', 'Степанович', 'Комаров', NULL, 4);


--
-- TOC entry 3507 (class 0 OID 25660)
-- Dependencies: 220
-- Data for Name: enterprise_manager; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.enterprise_manager VALUES (1, 1);
INSERT INTO public.enterprise_manager VALUES (2, 1);
INSERT INTO public.enterprise_manager VALUES (2, 2);
INSERT INTO public.enterprise_manager VALUES (3, 2);


--
-- TOC entry 3508 (class 0 OID 25663)
-- Dependencies: 221
-- Data for Name: enterprises; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.enterprises VALUES (1, 'Москва', 'ТрансЛогистика');
INSERT INTO public.enterprises VALUES (2, 'Санкт-Петербург', 'Северный путь');
INSERT INTO public.enterprises VALUES (3, 'Ростов-на-Дону', 'Южный экспресс');
INSERT INTO public.enterprises VALUES (4, 'Владивосток', 'ВостокАвто');
INSERT INTO public.enterprises VALUES (5, 'Воронеж', 'ООО Победа');


--
-- TOC entry 3510 (class 0 OID 25669)
-- Dependencies: 223
-- Data for Name: managers; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.managers VALUES (1, 'managerA', '$2a$12$Lti2.hvnMoObdieHOvR/ceDeZUD8c6dKM2oMIjJP0nMSxjtslzVjq', 'Иван', 'Иванов', NULL);
INSERT INTO public.managers VALUES (2, 'managerB', '$2a$12$2mIwOz0tElxuZy2wld/Egufbtdo/9n75UgxteCnD97s7OSSmnjqFm', 'Пётр', 'Петров', NULL);


--
-- TOC entry 3512 (class 0 OID 25675)
-- Dependencies: 225
-- Data for Name: vehicle_models; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.vehicle_models VALUES (1, 60, 500, 'Седан Премиум', 5, 500, 'CAR');
INSERT INTO public.vehicle_models VALUES (2, 45, 400, 'Хэтчбек Компакт', 5, 350, 'CAR');
INSERT INTO public.vehicle_models VALUES (3, 80, 800, 'Внедорожник Универсал', 7, 600, 'SUV');
INSERT INTO public.vehicle_models VALUES (4, 65, 600, 'Кроссовер Спорт', 5, 450, 'SUV');
INSERT INTO public.vehicle_models VALUES (5, 55, 550, 'Универсал Семейный', 5, 650, 'CAR');
INSERT INTO public.vehicle_models VALUES (6, 58, 500, 'Седан Бизнес', 5, 480, 'CAR');
INSERT INTO public.vehicle_models VALUES (7, 70, 700, 'Минивэн Комфорт', 8, 550, 'MINIVAN');
INSERT INTO public.vehicle_models VALUES (8, 0, 450, 'Электромобиль Тест', 5, 400, 'CAR');
INSERT INTO public.vehicle_models VALUES (9, 50, 450, 'Ретро Классик', 4, 300, 'CAR');
INSERT INTO public.vehicle_models VALUES (10, 48, 420, 'Винтаж Престиж', 4, 280, 'CAR');
INSERT INTO public.vehicle_models VALUES (11, 0, 400, 'Электро Хэтчбек', 5, 320, 'CAR');
INSERT INTO public.vehicle_models VALUES (12, 45, 480, 'Гибрид Премиум', 5, 380, 'CAR');
INSERT INTO public.vehicle_models VALUES (13, 120, 5000, 'Грузовик Мастер', 3, 0, 'TRUCK');
INSERT INTO public.vehicle_models VALUES (14, 90, 1500, 'Микроавтобус Транзит', 16, 200, 'BUS');
INSERT INTO public.vehicle_models VALUES (15, 35, 350, 'Городской Мини', 4, 180, 'CAR');
INSERT INTO public.vehicle_models VALUES (16, 75, 400, 'Спорткар Эксклюзив', 2, 150, 'CAR');
INSERT INTO public.vehicle_models VALUES (17, 52, 380, 'Кабриолет "Стиль"', 4, 200, 'CAR');
INSERT INTO public.vehicle_models VALUES (18, 40, 300, 'Тест Минимальный Год', 2, 100, 'CAR');
INSERT INTO public.vehicle_models VALUES (19, 50, 400, 'Тест Нулевой Пробег', 5, 300, 'CAR');
INSERT INTO public.vehicle_models VALUES (20, 48, 420, 'Тест Нулевая Цена', 5, 320, 'CAR');
INSERT INTO public.vehicle_models VALUES (21, 52, 450, 'Седан Стандарт', 5, 420, 'CAR');
INSERT INTO public.vehicle_models VALUES (22, 58, 550, 'Кроссовер Эконом', 5, 400, 'SUV');
INSERT INTO public.vehicle_models VALUES (23, 85, 850, 'Внедорожник Люкс', 7, 550, 'SUV');
INSERT INTO public.vehicle_models VALUES (27, 1, 1, 'asdesadf', 1, 1, 'BUS');


--
-- TOC entry 3514 (class 0 OID 25679)
-- Dependencies: 227
-- Data for Name: vehicles; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO public.vehicles VALUES (1, 'Превосходное состояние, один владелец, полная комплектация', 2022, 15000, 'А123БВ', 2500000, 777, 1, 1);
INSERT INTO public.vehicles VALUES (2, 'Экономичный городской автомобиль, идеально для города', 2020, 45000, 'Е234КХ', 1200000, 78, 1, 2);
INSERT INTO public.vehicles VALUES (3, 'Проходимость, комфорт и просторный салон', 2021, 30000, 'О567ТР', 3500000, 50, 1, 3);
INSERT INTO public.vehicles VALUES (4, 'Новый автомобиль с современными технологиями', 2023, 5000, 'У890МН', 4200000, 197, 1, 4);
INSERT INTO public.vehicles VALUES (5, 'Надежный семейный автомобиль, регулярное ТО', 2018, 120000, 'Х123ОП', 850000, 47, 1, 5);
INSERT INTO public.vehicles VALUES (6, 'Представительский класс, ухоженное состояние', 2019, 80000, 'С456ТУ', 1800000, 77, 2, 6);
INSERT INTO public.vehicles VALUES (7, 'Просторный салон, идеален для путешествий', 2017, 95000, 'К789АВ', 1100000, 74, 2, 7);
INSERT INTO public.vehicles VALUES (8, 'Тестовый автомобиль, цена по запросу', 2022, 10000, 'М321ЕН', 0, 95, 2, 8);
INSERT INTO public.vehicles VALUES (9, 'Раритетный автомобиль в коллекционном состоянии', 1985, 250000, 'В987ЛС', 500000, 1, 2, 9);
INSERT INTO public.vehicles VALUES (10, 'Историческая ценность, требует реставрации', 1972, 180000, 'Р654ФМ', 750000, 2, 2, 10);
INSERT INTO public.vehicles VALUES (11, 'Современный электромобиль, нулевой пробег', 2024, 0, 'Т321АК', 3200000, 99, 3, 11);
INSERT INTO public.vehicles VALUES (12, 'Экономичный гибрид, новейшие технологии', 2024, 0, 'П753ОС', 2800000, 177, 3, 12);
INSERT INTO public.vehicles VALUES (13, 'Рабочая лошадка, проверенная временем', 2015, 450000, 'Н147УЕ', 1500000, 63, 3, 13);
INSERT INTO public.vehicles VALUES (14, 'Для коммерческих перевозок, просторный', 2016, 380000, 'Е963ХВ', 2200000, 45, 3, 14);
INSERT INTO public.vehicles VALUES (15, 'Практически новый, минимальный пробег', 2020, 500, 'А555АА', 950000, 777, 3, 15);
INSERT INTO public.vehicles VALUES (16, 'Эксклюзивная модель, ограниченная серия', 2023, 100, 'С001СС', 12500000, 77, 4, 16);
INSERT INTO public.vehicles VALUES (17, 'Элегантный дизайн ★ Премиум материалы ★ Улучшенная аэродинамика', 2022, 15000, 'В777ВВ', 5400000, 777, 4, 17);
INSERT INTO public.vehicles VALUES (18, 'Тестовый автомобиль для проверки граничных значений года', 1700, 100000, 'Т999ТТ', 100000, 99, 4, 18);
INSERT INTO public.vehicles VALUES (19, 'Автомобиль с нулевым пробегом', 2020, 0, 'Н000НН', 1500000, 97, 4, 19);
INSERT INTO public.vehicles VALUES (20, 'Автомобиль с символической ценой', 2019, 20000, 'Ц000ЦЦ', 0, 93, 4, 20);
INSERT INTO public.vehicles VALUES (21, 'Сбалансированное сочетание цены и качества', 2021, 25000, 'У123УУ', 1900000, 116, 4, 21);
INSERT INTO public.vehicles VALUES (22, 'Экономичный кроссовер для города', 2020, 40000, 'К456КК', 1350000, 164, 4, 22);
INSERT INTO public.vehicles VALUES (23, 'Премиальный внедорожник с полным комплектом опций', 2023, 8000, 'Л777ЛЛ', 6800000, 777, 4, 23);
INSERT INTO public.vehicles VALUES (24, 'via curl', 2023, 0, 'А111АА', 1000000, 77, NULL, 6);
INSERT INTO public.vehicles VALUES (25, 'Новый автомобиль', 2022, 10000, 'A123BC', 2500000, 159, NULL, 1);


--
-- TOC entry 3522 (class 0 OID 0)
-- Dependencies: 219
-- Name: drivers_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.drivers_id_seq', 14, true);


--
-- TOC entry 3523 (class 0 OID 0)
-- Dependencies: 222
-- Name: enterprises_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.enterprises_id_seq', 6, true);


--
-- TOC entry 3524 (class 0 OID 0)
-- Dependencies: 224
-- Name: managers_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.managers_id_seq', 2, true);


--
-- TOC entry 3525 (class 0 OID 0)
-- Dependencies: 226
-- Name: vehicle_models_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.vehicle_models_id_seq', 27, true);


--
-- TOC entry 3526 (class 0 OID 0)
-- Dependencies: 228
-- Name: vehicles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.vehicles_id_seq', 30, true);


--
-- TOC entry 3334 (class 2606 OID 25689)
-- Name: drivers drivers_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.drivers
    ADD CONSTRAINT drivers_pkey PRIMARY KEY (id);


--
-- TOC entry 3342 (class 2606 OID 25691)
-- Name: enterprises enterprises_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.enterprises
    ADD CONSTRAINT enterprises_pkey PRIMARY KEY (id);


--
-- TOC entry 3344 (class 2606 OID 25693)
-- Name: managers managers_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.managers
    ADD CONSTRAINT managers_pkey PRIMARY KEY (id);


--
-- TOC entry 3346 (class 2606 OID 25695)
-- Name: managers managers_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.managers
    ADD CONSTRAINT managers_username_key UNIQUE (username);


--
-- TOC entry 3340 (class 2606 OID 25697)
-- Name: enterprise_manager pk_enterprise_manager; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.enterprise_manager
    ADD CONSTRAINT pk_enterprise_manager PRIMARY KEY (enterprise_id, manager_id);


--
-- TOC entry 3336 (class 2606 OID 25699)
-- Name: drivers uk96yu581yhqmou7yr216k0m5ae; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.drivers
    ADD CONSTRAINT uk96yu581yhqmou7yr216k0m5ae UNIQUE (current_vehicle_id);


--
-- TOC entry 3348 (class 2606 OID 25701)
-- Name: vehicle_models vehicle_models_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.vehicle_models
    ADD CONSTRAINT vehicle_models_pkey PRIMARY KEY (id);


--
-- TOC entry 3350 (class 2606 OID 25703)
-- Name: vehicles vehicles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.vehicles
    ADD CONSTRAINT vehicles_pkey PRIMARY KEY (id);


--
-- TOC entry 3337 (class 1259 OID 25704)
-- Name: idx_em_enterprise; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_em_enterprise ON public.enterprise_manager USING btree (enterprise_id);


--
-- TOC entry 3338 (class 1259 OID 25705)
-- Name: idx_em_manager; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_em_manager ON public.enterprise_manager USING btree (manager_id);


--
-- TOC entry 3353 (class 2606 OID 25706)
-- Name: drivers fk1wtbgb0csyhv79vj9e2358qj8; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.drivers
    ADD CONSTRAINT fk1wtbgb0csyhv79vj9e2358qj8 FOREIGN KEY (enterprise_id) REFERENCES public.enterprises(id);


--
-- TOC entry 3351 (class 2606 OID 25711)
-- Name: driver_vehicle fk3lgk99f65fki1n3r4315kakrn; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.driver_vehicle
    ADD CONSTRAINT fk3lgk99f65fki1n3r4315kakrn FOREIGN KEY (vehicle_id) REFERENCES public.vehicles(id);


--
-- TOC entry 3355 (class 2606 OID 25716)
-- Name: enterprise_manager fk_em_enterprise; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.enterprise_manager
    ADD CONSTRAINT fk_em_enterprise FOREIGN KEY (enterprise_id) REFERENCES public.enterprises(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 3356 (class 2606 OID 25721)
-- Name: enterprise_manager fk_em_manager; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.enterprise_manager
    ADD CONSTRAINT fk_em_manager FOREIGN KEY (manager_id) REFERENCES public.managers(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 3357 (class 2606 OID 25726)
-- Name: vehicles fke4n3vwcrfkcfpyp8g0jsqlr4d; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.vehicles
    ADD CONSTRAINT fke4n3vwcrfkcfpyp8g0jsqlr4d FOREIGN KEY (model_id) REFERENCES public.vehicle_models(id);


--
-- TOC entry 3358 (class 2606 OID 25731)
-- Name: vehicles fkjov7f6h9qlw7xwbl5s2ksa7no; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.vehicles
    ADD CONSTRAINT fkjov7f6h9qlw7xwbl5s2ksa7no FOREIGN KEY (enterprise_id) REFERENCES public.enterprises(id);


--
-- TOC entry 3354 (class 2606 OID 25736)
-- Name: drivers fkltqj8tf7yhilund6aec6o3wrh; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.drivers
    ADD CONSTRAINT fkltqj8tf7yhilund6aec6o3wrh FOREIGN KEY (current_vehicle_id) REFERENCES public.vehicles(id);


--
-- TOC entry 3352 (class 2606 OID 25741)
-- Name: driver_vehicle fktrtw8u8ohlwh0imiklg3qg3jc; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.driver_vehicle
    ADD CONSTRAINT fktrtw8u8ohlwh0imiklg3qg3jc FOREIGN KEY (driver_id) REFERENCES public.drivers(id);


-- Completed on 2025-11-17 07:17:59 MSK

--
-- PostgreSQL database dump complete
--

