-- Вставка данных в таблицу vehicle_models
INSERT INTO vehicle_models (name, vehicle_type, fuel_tank_volume, load_capacity_kg, seats_count, trunk_volume_l) VALUES
-- Легковые автомобили
('Седан Премиум', 'CAR', 60, 500, 5, 500),
('Хэтчбек Компакт', 'CAR', 45, 400, 5, 350),
('Внедорожник Универсал', 'SUV', 80, 800, 7, 600),
('Кроссовер Спорт', 'SUV', 65, 600, 5, 450),
('Универсал Семейный', 'CAR', 55, 550, 5, 650),
('Седан Бизнес', 'CAR', 58, 500, 5, 480),
('Минивэн Комфорт', 'MINIVAN', 70, 700, 8, 550),
('Электромобиль Тест', 'CAR', 0, 450, 5, 400),
('Ретро Классик', 'CAR', 50, 450, 4, 300),
('Винтаж Престиж', 'CAR', 48, 420, 4, 280),
('Электро Хэтчбек', 'CAR', 0, 400, 5, 320),
('Гибрид Премиум', 'CAR', 45, 480, 5, 380),
('Грузовик Мастер', 'TRUCK', 120, 5000, 3, 0),
('Микроавтобус Транзит', 'BUS', 90, 1500, 16, 200),
('Городской Мини', 'CAR', 35, 350, 4, 180),
('Спорткар Эксклюзив', 'CAR', 75, 400, 2, 150),
('Кабриолет "Стиль"', 'CAR', 52, 380, 4, 200),
('Тест Минимальный Год', 'CAR', 40, 300, 2, 100),
('Тест Нулевой Пробег', 'CAR', 50, 400, 5, 300),
('Тест Нулевая Цена', 'CAR', 48, 420, 5, 320),
('Седан Стандарт', 'CAR', 52, 450, 5, 420),
('Кроссовер Эконом', 'SUV', 58, 550, 5, 400),
('Внедорожник Люкс', 'SUV', 85, 850, 7, 550);

-- Вставка данных в таблицу vehicles
INSERT INTO vehicles (model_id, number_ru, region_registration_code, manufacture_year, mileage_km, price_rub, description) VALUES
-- Легковые автомобили
(1, 'А123БВ', 777, 2022, 15000, 2500000, 'Превосходное состояние, один владелец, полная комплектация'),
(2, 'Е234КХ', 78, 2020, 45000, 1200000, 'Экономичный городской автомобиль, идеально для города'),
(3, 'О567ТР', 50, 2021, 30000, 3500000, 'Проходимость, комфорт и просторный салон'),
(4, 'У890МН', 197, 2023, 5000, 4200000, 'Новый автомобиль с современными технологиями'),
-- Автомобили с пробегом
(5, 'Х123ОП', 47, 2018, 120000, 850000, 'Надежный семейный автомобиль, регулярное ТО'),
(6, 'С456ТУ', 77, 2019, 80000, 1800000, 'Представительский класс, ухоженное состояние'),
(7, 'К789АВ', 74, 2017, 95000, 1100000, 'Просторный салон, идеален для путешествий'),
-- Автомобиль с ценой по запросу (вместо NULL используем 0, так как поле NOT NULL)
(8, 'М321ЕН', 95, 2022, 10000, 0, 'Тестовый автомобиль, цена по запросу'),
-- Старинные автомобили (для проверки валидации года)
(9, 'В987ЛС', 1, 1985, 250000, 500000, 'Раритетный автомобиль в коллекционном состоянии'),
(10, 'Р654ФМ', 2, 1972, 180000, 750000, 'Историческая ценность, требует реставрации'),
-- Новые автомобили с нулевым пробегом
(11, 'Т321АК', 99, 2024, 0, 3200000, 'Современный электромобиль, нулевой пробег'),
(12, 'П753ОС', 177, 2024, 0, 2800000, 'Экономичный гибрид, новейшие технологии'),
-- Автомобили с максимальными значениями
(13, 'Н147УЕ', 63, 2015, 450000, 1500000, 'Рабочая лошадка, проверенная временем'),
(14, 'Е963ХВ', 45, 2016, 380000, 2200000, 'Для коммерческих перевозок, просторный'),
-- Автомобили с минимальными значениями
(15, 'А555АА', 777, 2020, 500, 950000, 'Практически новый, минимальный пробег'),
(16, 'С001СС', 77, 2023, 100, 12500000, 'Эксклюзивная модель, ограниченная серия'),
-- Автомобили с специальными символами
(17, 'В777ВВ', 777, 2022, 15000, 5400000, 'Элегантный дизайн ★ Премиум материалы ★ Улучшенная аэродинамика'),
-- Автомобили для boundary-тестирования
(18, 'Т999ТТ', 99, 1700, 100000, 100000, 'Тестовый автомобиль для проверки граничных значений года'),
(19, 'Н000НН', 97, 2020, 0, 1500000, 'Автомобиль с нулевым пробегом'),
(20, 'Ц000ЦЦ', 93, 2019, 20000, 0, 'Автомобиль с символической ценой'),
-- Дополнительные автомобили с различными кодами регионов
(21, 'У123УУ', 116, 2021, 25000, 1900000, 'Сбалансированное сочетание цены и качества'),
(22, 'К456КК', 164, 2020, 40000, 1350000, 'Экономичный кроссовер для города'),
(23, 'Л777ЛЛ', 777, 2023, 8000, 6800000, 'Премиальный внедорожник с полным комплектом опций');

-- 1. Сначала создаем предприятия
INSERT INTO enterprises (name, city) VALUES
('ТрансЛогистика', 'Москва'),
('Северный путь', 'Санкт-Петербург'),
('Южный экспресс', 'Ростов-на-Дону'),
('ВостокАвто', 'Владивосток');

-- 2. Обновляем автомобили, добавляя их к предприятиям
UPDATE vehicles SET enterprise_id = 1 WHERE id IN (1, 2, 3, 4, 5);
UPDATE vehicles SET enterprise_id = 2 WHERE id IN (6, 7, 8, 9, 10);
UPDATE vehicles SET enterprise_id = 3 WHERE id IN (11, 12, 13, 14, 15);
UPDATE vehicles SET enterprise_id = 4 WHERE id IN (16, 17, 18, 19, 20, 21, 22, 23);

-- 3. Добавляем водителей с привязкой к предприятиям
INSERT INTO drivers (name, surname, patronymic, enterprise_id, status, monthly_salary) VALUES
-- Водители для предприятия 1 (ТрансЛогистика)
('Иван', 'Петров', 'Сергеевич', 1, 'ACTIVE', 85000),
('Алексей', 'Смирнов', 'Владимирович', 1, 'ACTIVE', 92000),
('Дмитрий', 'Козлов', 'Андреевич', 1, 'INACTIVE', 78000),
('Сергей', 'Новиков', 'Игоревич', 1, 'ACTIVE', 88000),

-- Водители для предприятия 2 (Северный путь)
('Андрей', 'Волков', 'Петрович', 2, 'ACTIVE', 81000),
('Михаил', 'Соловьев', 'Дмитриевич', 2, 'ACTIVE', 76000),
('Артем', 'Васильев', 'Сергеевич', 2, 'INACTIVE', 73000),

-- Водители для предприятия 3 (Южный экспресс)
('Павел', 'Зайцев', 'Александрович', 3, 'ACTIVE', 79000),
('Николай', 'Павлов', 'Викторович', 3, 'ACTIVE', 82000),
('Егор', 'Семенов', 'Олегович', 3, 'INACTIVE', 68000),

-- Водители для предприятия 4 (ВостокАвто)
('Владимир', 'Голубев', 'Николаевич', 4, 'ACTIVE', 95000),
('Роман', 'Виноградов', 'Анатольевич', 4, 'ACTIVE', 87000),
('Антон', 'Белов', 'Иванович', 4, 'ACTIVE', 91000),
('Григорий', 'Комаров', 'Степанович', 4, 'INACTIVE', 75000);

-- 4. Создаем связи многие-ко-многим между водителями и автомобилями
INSERT INTO driver_vehicle (driver_id, vehicle_id) VALUES
-- Предприятие 1: ТрансЛогистика
(1, 1), (1, 2),  -- Иван Петров может работать на машинах 1 и 2
(2, 3), (2, 4),  -- Алексей Смирнов может работать на машинах 3 и 4
(3, 5),          -- Дмитрий Козлов может работать на машине 5
(4, 1), (4, 3),  -- Сергей Новиков может работать на машинах 1 и 3

-- Предприятие 2: Северный путь
(5, 6), (5, 7),  -- Андрей Волков может работать на машинах 6 и 7
(6, 8), (6, 9),  -- Михаил Соловьев может работать на машинах 8 и 9
(7, 10),         -- Артем Васильев может работать на машине 10

-- Предприятие 3: Южный экспресс
(8, 11), (8, 12), -- Павел Зайцев может работать на машинах 11 и 12
(9, 13), (9, 14), -- Николай Павлов может работать на машинах 13 и 14
(10, 15),         -- Егор Семенов может работать на машине 15

-- Предприятие 4: ВостокАвто
(11, 16), (11, 17), -- Владимир Голубев может работать на машинах 16 и 17
(12, 18), (12, 19), -- Роман Виноградов может работать на машинах 18 и 19
(13, 20), (13, 21), -- Антон Белов может работать на машинах 20 и 21
(14, 22), (14, 23); -- Григорий Комаров может работать на машинах 22 и 23

-- 5. Назначаем активные автомобили для ВСЕХ активных водителей (исправленная версия)
UPDATE drivers SET current_vehicle_id = 1 WHERE id = 1;  -- Иван Петров активно работает на машине 1
UPDATE drivers SET current_vehicle_id = 3 WHERE id = 2;  -- Алексей Смирнов активно работает на машине 3
UPDATE drivers SET current_vehicle_id = 2 WHERE id = 4;  -- Сергей Новиков активно работает на машине 2

UPDATE drivers SET current_vehicle_id = 6 WHERE id = 5;  -- Андрей Волков активно работает на машине 6
UPDATE drivers SET current_vehicle_id = 7 WHERE id = 6;  -- Михаил Соловьев активно работает на машине 7

UPDATE drivers SET current_vehicle_id = 11 WHERE id = 8; -- Павел Зайцев активно работает на машине 11
UPDATE drivers SET current_vehicle_id = 12 WHERE id = 9; -- Николай Павлов активно работает на машине 12

UPDATE drivers SET current_vehicle_id = 16 WHERE id = 11; -- Владимир Голубев активно работает на машине 16
UPDATE drivers SET current_vehicle_id = 17 WHERE id = 12; -- Роман Виноградов активно работает на машине 17
UPDATE drivers SET current_vehicle_id = 20 WHERE id = 13; -- Антон Белов активно работает на машине 20

-- Устанавливаем статус INACTIVE для водителей без текущей машины
UPDATE drivers SET status = 'INACTIVE' WHERE current_vehicle_id IS NULL;

-- 6. Добавляем несколько автомобилей без водителей (как требуется в задании)
UPDATE vehicles SET enterprise_id = 1 WHERE id IN (24, 25); -- Добавляем еще пару машин без водителей